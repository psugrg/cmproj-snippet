##
# This is the CMakeLists.txt file containing the configuration of the mainCmp. 
# It includes the main() function and creates executable file.

cmake_minimum_required(VERSION 3.16)

# Project name (name of this component)
project(mainCmp)

# Add executable. The executable name is set in ${app_name} variable by the top level CMakeLists.txt
add_executable(${app_name} 
    src/cmproj.cpp
)

# Add include directories of this component
target_include_directories(${app_name} PUBLIC 
    ${PROJECT_BINARY_DIR}/inc
    ${PROJECT_SOURCE_DIR}/inc
)

# Add directory containing the coverage files generated by gcov
# NOTE: Normally the .dir directory name would be determined by adding the ${PROJECT_NAME} 
# at front. In this case however it's change since the folder is named after the application name.
set(coverage_files_dir 
    ${coverage_files_dir} 
    ${PROJECT_BINARY_DIR}/CMakeFiles/${app_name}.dir/src
    PARENT_SCOPE)

# Generate Version header file
configure_file(inc/Version.h.in ${PROJECT_BINARY_DIR}/inc/Version.h)

# Link required libraries
target_link_libraries(${app_name} PUBLIC secCmp)

# Install target configuration
install(TARGETS ${app_name} DESTINATION bin)